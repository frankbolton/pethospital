---
title: "R Notebook"
output:
  pdf_document: default
  html_notebook: default
---

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Ctrl+Alt+I*.
When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Ctrl+Shift+K* to preview the HTML file).
The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.


This is a playground to test out the r dataframe from nested json

```{r}
json = '{"category1": {"town1": 8,"town2": 2},"category2": {"town1": 4,"town2": 3}}'

library(jsonlite)
lst = fromJSON(json)
a = transform(stack(lst), towns=c(sapply(lst, names)))

library(plyr)
b = ldply(fromJSON(json), stack)


```

and another demo code
```{r}
json <- fromJSON('{"category1": {"town1": 8,"town2": 2},"category2":{"town1": 4,"town2": 3}}') 
json <- data.frame(number = unlist(json))
json$rownames <- rownames(json) 
rownames(json) <- NULL
json$categories <- lapply(strsplit(as.character(json$rownames), "\\."), "[", 1)
json$town <- lapply(strsplit(as.character(json$rownames), "\\."), "[",2) 
json$rownames <- NULL
```


This is where I load the results code from the pethospital. The participant of interest is number 120
```{r}
require(jsonlite)
EventsFileName = "../../dbEvents.json"
l <- readLines(EventsFileName, -1L)

documentEvents = fromJSON(EventsFileName)
```
